{% load static %}

{% if features_by_type %}
<div class="mb-8 tab-section">
  <h2 class="text-3xl font-black mb-4 text-black-important">CARACTÉRISTIQUES TECHNIQUES</h2>
  
  <div class="neo-section p-4" style="background-color: #fefce8;">
    <!-- Onglets des caractéristiques -->
    <div class="mb-4 tabs-container">
      <div class="flex flex-wrap">
        {% for feature_type in features_by_type.keys %}
        <button class="tab-btn feature-tab-btn {% if forloop.first %}active{% endif %}" 
                data-target="feature-tab-{{ feature_type|slugify }}">
          {{ feature_type }}
        </button>
        {% endfor %}
      </div>
    </div>
    
    <!-- Contenu des onglets -->
    {% for feature_type, features in features_by_type.items %}
    <div id="feature-tab-{{ feature_type|slugify }}" class="tab-content feature-tab-content {% if forloop.first %}active{% endif %}">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 neo-grid">
        {% for feature_value in features %}
        <div class="feature-item">
          <div class="feature-name">{{ feature_value.feature.name }}</div>
          
          {% if feature_value.feature.is_boolean %}
            {% if feature_value.value == 'Oui' or feature_value.value == 'True' %}
            <span class="feature-badge yes">Oui</span>
            {% else %}
            <span class="feature-badge no">Non</span>
            {% endif %}
          {% else %}
            <div class="feature-value">{{ feature_value.value }}</div>
          {% endif %}
          
          {% if feature_value.notes %}
          <div class="mt-3 p-2 bg-yellow-100 border-l-4 border-black">
            <p class="text-sm">{{ feature_value.notes }}</p>
          </div>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Chargement du fichier JavaScript externe -->
<script src="{% static 'js/tabs.js' %}"></script>
{% endif %}